<!DOCTYPE html>
<html>
  <head>
    <title>Edit Product</title>
  </head>
  <body>
    <h1>Edit Product</h1>
    <form id="editForm" method="POST">
      <input type="hidden" name="_method" value="PATCH" />
      <input type="text" name="name" id="productName" required />
      <button type="submit">Save</button>
    </form>

    <script>
      const id = window.location.pathname.split("/").pop(); // gets the ID from URL
      const form = document.getElementById("editForm");
      const input = document.getElementById("productName");
      

      // Fetch current product data
      fetch(`/products/${id}`)
        .then((res) => res.json())
        .then((data) => {
          input.value = data.name;
          form.action = `/products/${id}?_method=PATCH`;
        })
        .catch((err) => {
          alert("Failed to load product.");
        });
    </script>
  </body>
</html>
